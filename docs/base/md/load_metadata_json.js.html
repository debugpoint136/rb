<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>JSDoc: Source: load_metadata_json.js</title>

    <script src="scripts/prettify/prettify.js"> </script>
    <script src="scripts/prettify/lang-css.js"> </script>
    <!--[if lt IE 9]>
      <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    <link type="text/css" rel="stylesheet" href="styles/prettify-tomorrow.css">
    <link type="text/css" rel="stylesheet" href="styles/jsdoc-default.css">
</head>

<body>

<div id="main">

    <h1 class="page-title">Source: load_metadata_json.js</h1>

    



    
    <section>
        <article>
            <pre class="prettyprint source linenums"><code>/**
 * @param raw
 */

function load_metadata_json(raw) {
    var obj = {
        c2p: {},
        p2c: {},
        root: {},
        checkbox: {},
        idx2attr: {},
        idx2desc: {},
        idx2color: {},
    };
    gflag.mdlst.push(obj);
    var idx = gflag.mdlst.length - 1;

    for (var term in raw.vocabulary) {
        parse_metadata_recursive(null, term, raw.vocabulary[term], obj);
        obj.root[term] = 1;
    }
    if (raw.tag) {
        obj.tag = raw.tag;
    }
    if (raw.sourceurl) {
        obj.sourceurl = raw.sourceurl;
    } else {
        // no source url, not a shared md
        if (raw.source) obj.source = raw.source;
        obj.original = raw; // for stringify
    }
    if (raw.terms) {
        for (var t in raw.terms) {
            var v = raw.terms[t];
            if (Array.isArray(v)) {
                if (v.length == 0) {
                    print2console('Empty array for term definition (' + t + ')', 2);
                    v = ['unidentified_' + t];
                }
                obj.idx2attr[t] = v[0];
                if (v[1]) {
                    obj.idx2desc[t] = v[1];
                }
                if (v[2]) {
                    obj.idx2color[t] = v[2];
                }
            }
        }
    }
// for showing in c31
    var d = document.createElement('div');
    d.style.margin = 10;
    obj.main = d;
    var ul = dom_create('ul', d, 'padding:5px 10px;margin:0px;');
    if (obj.color) {
        ul.style.borderTop = 'solid 2px ' + obj.color;
        ul.style.backgroundColor = lightencolor(colorstr2int(obj.color), 0.9);
    }
    obj.mainul = ul;
    for (var rt in obj.root) {
        make_mdtree_recursive(rt, obj, idx, ul);
    }
    return idx;
}</code></pre>
        </article>
    </section>




</div>

<nav>
    <h2><a href="index.html">Home</a></h2><h3>Global</h3><ul><li><a href="global.html#button_mcm_invokemds">button_mcm_invokemds</a></li><li><a href="global.html#getmdidx_internal">getmdidx_internal</a></li><li><a href="global.html#load_metadata_json">load_metadata_json</a></li><li><a href="global.html#make_mdtree_recursive">make_mdtree_recursive</a></li><li><a href="global.html#mcmheader_mover">mcmheader_mover</a></li><li><a href="global.html#md_findterm">md_findterm</a></li><li><a href="global.html#mdCheckboxchange">mdCheckboxchange</a></li><li><a href="global.html#mdshowhide">mdshowhide</a></li><li><a href="global.html#mdt_box_click">mdt_box_click</a></li><li><a href="global.html#mdterm_print">mdterm_print</a></li><li><a href="global.html#mdtermsearch">mdtermsearch</a></li><li><a href="global.html#mdtermsearch_ku">mdtermsearch_ku</a></li><li><a href="global.html#mdtermsearch_show">mdtermsearch_show</a></li><li><a href="global.html#menu_mcm_invokemds">menu_mcm_invokemds</a></li><li><a href="global.html#parse_metadata_recursive">parse_metadata_recursive</a></li><li><a href="global.html#parse_nativemd">parse_nativemd</a></li><li><a href="global.html#words2mdterm">words2mdterm</a></li></ul>
</nav>

<br class="clear">

<footer>
    Documentation generated by <a href="https://github.com/jsdoc3/jsdoc">JSDoc 3.3.2</a> on Mon Jul 27 2015 17:31:23 GMT-0500 (CDT)
</footer>

<script> prettyPrint(); </script>
<script src="scripts/linenumber.js"> </script>
</body>
</html>
